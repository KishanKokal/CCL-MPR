{"ast":null,"code":"var _jsxFileName = \"/Users/kishankokal/repos/CCL-Mini-Project/src/components/book-form.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { toast } from 'react-toastify';\nimport * as BookActionTypes from '../store/actions/books.actions';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPaperPlane, faBan } from '@fortawesome/free-solid-svg-icons';\nlibrary.add(faPaperPlane);\nlibrary.add(faBan);\nexport class BookForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.generatedID = function () {\n      return '_' + Math.random().toString(36).substr(2, 9);\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.state = {\n      book: {\n        id: undefined,\n        name: \"\",\n        description: \"\",\n        author: \"\",\n        photo: \"\"\n      },\n      creating: true,\n      editing: false,\n      viewing: false\n    };\n  }\n\n  componentDidMount() {\n    const bookId = this.props.history.location.pathname.split(\"/\")[2];\n    const books = this.props.initialValues;\n    this.props.action.getBookAction(bookId).catch(error => {\n      toast(\"Error occured !\", {\n        type: toast.TYPE.ERROR,\n        autoClose: 3000\n      });\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const bookSelected = nextProps.selectedBook;\n    this.setState({\n      book: {\n        id: bookSelected.id,\n        name: bookSelected.name,\n        description: bookSelected.description,\n        author: bookSelected.author,\n        photo: bookSelected.photo\n      }\n    });\n  }\n\n  handleCancel(event) {\n    event.preventDefault();\n    this.props.history.replace('/books');\n  }\n\n  handleChange(event) {\n    const param = event.nativeEvent.srcElement.id;\n\n    switch (param) {\n      case \"id\":\n        this.setState({\n          book: {\n            id: event.target.value,\n            name: this.state.book.name,\n            description: this.state.book.description,\n            author: this.state.book.author,\n            photo: this.state.book.photo\n          }\n        });\n        break;\n\n      case \"name\":\n        this.setState({\n          book: {\n            id: this.state.book.id,\n            name: event.target.value,\n            description: this.state.book.description,\n            author: this.state.book.author,\n            photo: this.state.book.photo\n          }\n        });\n        break;\n\n      case \"description\":\n        this.setState({\n          book: {\n            id: this.state.book.id,\n            name: this.state.book.name,\n            description: event.target.value,\n            author: this.state.book.author,\n            photo: this.state.book.photo\n          }\n        });\n        break;\n\n      case \"author\":\n        this.setState({\n          book: {\n            id: this.state.book.id,\n            name: this.state.book.name,\n            description: this.state.book.description,\n            author: event.target.value,\n            photo: this.state.book.photo\n          }\n        });\n        break;\n\n      case \"photo\":\n        this.setState({\n          book: {\n            id: this.state.book.id,\n            name: this.state.book.name,\n            description: this.state.book.description,\n            author: this.state.book.author,\n            photo: event.target.value\n          }\n        });\n        break;\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    const book = {\n      id: this.state.book.id ? this.state.book.id : this.generatedID(),\n      name: this.state.book.name,\n      description: this.state.book.description,\n      author: this.state.book.author,\n      photo: this.state.book.photo\n    };\n    this.props.action.saveBookAction(book).then(() => {\n      toast(\"Book Saved\", {\n        type: toast.TYPE.SUCCESS,\n        autoClose: 3000\n      });\n      this.props.history.push('/books');\n    }).catch(error => {\n      toast(\"Error occured\", {\n        type: toast.TYPE.ERROR,\n        autoClose: 3000\n      });\n    });\n  }\n\n  handleReset(event) {//TODO\n  }\n\n  render() {\n    const {\n      initialValues\n    } = this.props.initialValues;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 25\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      class: \"form-control\",\n      value: this.state.book.name,\n      onChange: this.handleChange,\n      id: \"name\",\n      \"aria-describedby\": \"nameHelp\",\n      placeholder: \"Enter Name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }, \"Description\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      type: \"text\",\n      class: \"form-control\",\n      rows: \"5\",\n      value: this.state.book.description,\n      onChange: this.handleChange,\n      id: \"description\",\n      \"aria-describedby\": \"descriptionHelp\",\n      placeholder: \"Enter Description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"author\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, \"Author\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      class: \"form-control\",\n      value: this.state.book.author,\n      onChange: this.handleChange,\n      id: \"author\",\n      \"aria-describedby\": \"authorHelp\",\n      placeholder: \"Enter Author Full Name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"photo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 25\n      }\n    }, \"Photo\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      class: \"form-control\",\n      value: this.state.book.photo,\n      onChange: this.handleChange,\n      id: \"photo\",\n      placeholder: \"photo URL\",\n      \"aria-describedby\": \"photoHelp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"float-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, this.state.book.id ? /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 47\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: \"paper-plane\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 125\n      }\n    }), \" Update\") : /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 182\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: \"paper-plane\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 260\n      }\n    }), \" Submit\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger btn-space\",\n      onClick: this.handleCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: \"ban\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 112\n      }\n    }), \" Cancel\"))));\n  }\n\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  const bookId = ownProps.location.pathname.split(\"/\")[2];\n  return {\n    initialValues: state.booksReducer.books,\n    selectedBook: state.booksReducer.selectedBook\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  action: bindActionCreators(BookActionTypes, dispatch)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BookForm);","map":{"version":3,"sources":["/Users/kishankokal/repos/CCL-Mini-Project/src/components/book-form.js"],"names":["React","PropTypes","connect","bindActionCreators","toast","BookActionTypes","library","FontAwesomeIcon","faPaperPlane","faBan","add","BookForm","Component","constructor","props","generatedID","Math","random","toString","substr","handleSubmit","bind","handleChange","handleCancel","handleReset","state","book","id","undefined","name","description","author","photo","creating","editing","viewing","componentDidMount","bookId","history","location","pathname","split","books","initialValues","action","getBookAction","catch","error","type","TYPE","ERROR","autoClose","componentWillReceiveProps","nextProps","bookSelected","selectedBook","setState","event","preventDefault","replace","param","nativeEvent","srcElement","target","value","saveBookAction","then","SUCCESS","push","render","mapStateToProps","ownProps","booksReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { toast } from 'react-toastify';\nimport * as BookActionTypes from '../store/actions/books.actions';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPaperPlane, faBan } from '@fortawesome/free-solid-svg-icons';\nlibrary.add(faPaperPlane);\nlibrary.add(faBan);\n\nexport class BookForm extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleCancel = this.handleCancel.bind(this);\n        this.handleReset = this.handleReset.bind(this);\n        this.state = {\n            book: {\n                id: undefined,\n                name: \"\",\n                description: \"\",\n                author: \"\",\n                photo: \"\"\n            },\n            creating: true,\n            editing: false,\n            viewing: false\n        }\n    }\n\n    componentDidMount() {\n        const bookId = this.props.history.location.pathname.split(\"/\")[2];\n        const books = this.props.initialValues;\n        this.props.action.getBookAction(bookId)\n            .catch(error => {\n                toast(\"Error occured !\", { type: toast.TYPE.ERROR, autoClose: 3000 });\n            });\n    }\n\n    componentWillReceiveProps(nextProps) {\n        const bookSelected = nextProps.selectedBook;\n        this.setState(\n            {\n                book: {\n                    id: bookSelected.id,\n                    name: bookSelected.name,\n                    description: bookSelected.description,\n                    author: bookSelected.author,\n                    photo: bookSelected.photo\n                }\n            }\n        )\n    }\n\n    handleCancel(event) {\n        event.preventDefault();\n        this.props.history.replace('/books');\n    }\n\n    handleChange(event) {\n        const param = event.nativeEvent.srcElement.id;\n        switch (param) {\n            case \"id\":\n                this.setState(\n                    {\n                        book: {\n                            id: event.target.value,\n                            name: this.state.book.name,\n                            description: this.state.book.description,\n                            author: this.state.book.author,\n                            photo: this.state.book.photo\n                        }\n                    }\n                );\n                break;\n            case \"name\":\n                this.setState({\n                    book: {\n                        id: this.state.book.id,\n                        name: event.target.value,\n                        description: this.state.book.description,\n                        author: this.state.book.author,\n                        photo: this.state.book.photo\n                    }\n                }\n                );\n                break;\n            case \"description\":\n                this.setState({\n                    book: {\n                        id: this.state.book.id,\n                        name: this.state.book.name,\n                        description: event.target.value,\n                        author: this.state.book.author,\n                        photo: this.state.book.photo\n                    }\n                });\n                break;\n            case \"author\":\n                this.setState(\n                    {\n                        book: {\n                            id: this.state.book.id,\n                            name: this.state.book.name,\n                            description: this.state.book.description,\n                            author: event.target.value,\n                            photo: this.state.book.photo\n                        }\n                    }\n                );\n                break;\n            case \"photo\":\n                this.setState(\n                    {\n                        book: {\n                            id: this.state.book.id,\n                            name: this.state.book.name,\n                            description: this.state.book.description,\n                            author: this.state.book.author,\n                            photo: event.target.value\n                        }\n                    }\n                );\n                break;\n        }\n    }\n\n    handleSubmit(event) {\n        event.preventDefault();\n        const book = {\n            id: this.state.book.id ? this.state.book.id : this.generatedID(),\n            name: this.state.book.name,\n            description: this.state.book.description,\n            author: this.state.book.author,\n            photo: this.state.book.photo,\n        };\n        this.props.action.saveBookAction(book)\n            .then(() => {\n                toast(\"Book Saved\", { type: toast.TYPE.SUCCESS, autoClose: 3000 });\n                this.props.history.push('/books');\n            }).catch(error => {\n                toast(\"Error occured\", { type: toast.TYPE.ERROR, autoClose: 3000 });\n            });\n    }\n\n    handleReset(event) {\n        //TODO\n    }\n\n    generatedID = function () {\n        return '_' + Math.random().toString(36).substr(2, 9);\n    };\n\n    render() {\n        const { initialValues } = this.props.initialValues;\n        return (\n            <div className=\"container\">\n                <form onSubmit={this.handleSubmit}>\n                    <div class=\"form-group\">\n                        <label for=\"name\">Name</label>\n                        <input type=\"text\" class=\"form-control\" value={this.state.book.name} onChange={this.handleChange} id=\"name\" aria-describedby=\"nameHelp\" placeholder=\"Enter Name\" />\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label for=\"description\">Description</label>\n                        <textarea type=\"text\" class=\"form-control\" rows=\"5\" value={this.state.book.description} onChange={this.handleChange} id=\"description\" aria-describedby=\"descriptionHelp\" placeholder=\"Enter Description\" />\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label for=\"author\">Author</label>\n                        <input type=\"text\" class=\"form-control\" value={this.state.book.author} onChange={this.handleChange} id=\"author\" aria-describedby=\"authorHelp\" placeholder=\"Enter Author Full Name\" />\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label for=\"photo\">Photo</label>\n                        <input type=\"text\" class=\"form-control\" value={this.state.book.photo} onChange={this.handleChange} id=\"photo\" placeholder=\"photo URL\" aria-describedby=\"photoHelp\" />\n                    </div>\n\n                    <div class=\"float-right\">\n                        {this.state.book.id ? <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleSubmit}><FontAwesomeIcon icon='paper-plane' /> Update</button> : <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleSubmit}><FontAwesomeIcon icon='paper-plane' /> Submit</button> }\n                        <button type=\"button\" className=\"btn btn-danger btn-space\" onClick={this.handleCancel}><FontAwesomeIcon icon='ban' /> Cancel</button>\n                    </div>\n                </form>\n            </div>\n        );\n    }\n}\n\n\n\nconst mapStateToProps = (state, ownProps) => {\n    const bookId = ownProps.location.pathname.split(\"/\")[2];\n    return {\n        initialValues: state.booksReducer.books,\n        selectedBook: state.booksReducer.selectedBook\n    }\n};\n\nconst mapDispatchToProps = dispatch => ({\n    action: bindActionCreators(BookActionTypes, dispatch)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BookForm);"]},"metadata":{},"sourceType":"module"}